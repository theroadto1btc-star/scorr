<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SCORR - FC Purmerend Scheidsrechter</title>
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        button {
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
            -webkit-appearance: none;
            appearance: none;
            font-family: inherit;
        }

        html, body {
            height: 100%;
            overflow: hidden;
        }

        body {
            font-family: 'Lexend', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0A0E27;
            height: 100dvh;
            display: flex;
            flex-direction: column;
        }

        /* ===== APP SHELL ===== */
        .app-shell {
            max-width: 500px;
            width: 100%;
            margin: 0 auto;
            height: 100dvh;
            display: flex;
            flex-direction: column;
            background: linear-gradient(180deg, #0A0E27 0%, #1E2749 100%);
            position: relative;
            overflow: hidden;
        }

        /* ===== HEADER BAR ===== */
        .header-bar {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 8px 16px;
            background: rgba(0,0,0,0.4);
            flex-shrink: 0;
            gap: 8px;
            position: relative;
        }

        .header-bar .logo-text {
            font-size: 18px;
            font-weight: 900;
            letter-spacing: -0.5px;
            background: linear-gradient(135deg, #00FF88 0%, #00DDFF 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header-bar .club-badge {
            width: 34px;
            height: 34px;
            filter: drop-shadow(0 1px 3px rgba(0,0,0,0.3));
            border-radius: 50%;
        }

        .header-bar .share-btn {
            position: absolute;
            right: 12px;
            width: 36px;
            height: 36px;
            background: #1E2749;
            color: #00FF88;
            border: 1px solid rgba(0, 255, 136, 0.3);
            border-radius: 50%;
            font-size: 16px;
            cursor: pointer;
        }
        .header-bar .share-btn:active {
            background: #2A3460;
        }

        /* ===== SCORE PANEL ===== */
        .score-panel {
            padding: 12px 20px 8px;
            flex-shrink: 0;
        }

        .teams-row {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            align-items: center;
            gap: 8px;
        }

        .team-col {
            text-align: center;
        }

        .team-name-input {
            width: 100%;
            background: transparent;
            border: none;
            border-bottom: 1px solid rgba(0, 255, 136, 0.25);
            color: white;
            font-family: inherit;
            font-size: 13px;
            font-weight: 700;
            text-align: center;
            padding: 4px 2px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .team-name-input:focus {
            outline: none;
            border-bottom-color: #00FF88;
        }
        .team-name-input::placeholder {
            color: rgba(255,255,255,0.4);
        }

        .score-number {
            font-size: 72px;
            font-weight: 900;
            color: white;
            line-height: 1;
            margin: 4px 0;
            cursor: pointer;
            user-select: none;
            text-shadow: 0 2px 12px rgba(0,0,0,0.3);
        }

        .score-btns {
            display: flex;
            gap: 8px;
            justify-content: center;
        }

        .score-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border: none;
            font-size: 20px;
            font-weight: 700;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .score-btn.plus {
            background: #00FF88;
            color: #0A0E27;
        }
        .score-btn.plus:active {
            background: #00DD77;
            transform: scale(0.92);
        }
        .score-btn.minus {
            background: #1E2749;
            color: rgba(255,255,255,0.7);
        }
        .score-btn.minus:active {
            background: #2A3460;
            transform: scale(0.92);
        }

        .score-separator {
            font-size: 40px;
            font-weight: 900;
            color: #00FF88;
            padding-top: 28px;
        }

        /* ===== TIMER STRIP ===== */
        .timer-strip {
            padding: 8px 20px;
            text-align: center;
            flex-shrink: 0;
            border-top: 1px solid rgba(0, 255, 136, 0.15);
            border-bottom: 1px solid rgba(0, 255, 136, 0.15);
        }

        .timer-meta {
            font-size: 11px;
            font-weight: 600;
            color: rgba(255,255,255,0.5);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 2px;
        }

        .timer-row {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }

        .timer-display {
            font-size: 48px;
            font-weight: 900;
            font-family: 'Courier New', monospace;
            color: #00FF88;
            letter-spacing: 3px;
            line-height: 1.1;
            text-shadow: 0 2px 16px rgba(0, 255, 136, 0.3);
        }

        .timer-controls-inline {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .timer-btn-small {
            width: 40px;
            height: 32px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
        }
        .timer-btn-small.play {
            background: #00FF88;
            color: #0A0E27;
        }
        .timer-btn-small.play:active { background: #00DD77; }
        .timer-btn-small.pause {
            background: #1E2749;
            color: #00FF88;
            border: 1px solid rgba(0, 255, 136, 0.3);
        }
        .timer-btn-small.pause:active { background: #2A3460; }

        .timer-sub-row {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 16px;
            margin-top: 4px;
        }

        .setting-inline {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 11px;
            color: rgba(255,255,255,0.5);
            font-weight: 600;
        }

        .setting-inline .adj-btn {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: 1px solid rgba(0, 255, 136, 0.3);
            background: rgba(0, 255, 136, 0.08);
            color: rgba(255,255,255,0.6);
            font-size: 14px;
            font-weight: 700;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .setting-inline .adj-btn:active {
            background: rgba(255,255,255,0.1);
        }

        .setting-inline .val {
            min-width: 32px;
            text-align: center;
            color: rgba(255,255,255,0.7);
            font-weight: 700;
        }

        /* ===== NEXT HALF BUTTON ===== */
        .next-half-bar {
            padding: 8px 20px;
            flex-shrink: 0;
        }

        .next-half-btn {
            width: 100%;
            padding: 12px;
            background: #FF3D71;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            cursor: pointer;
            box-shadow: 0 4px 16px rgba(0,0,0,0.2);
        }
        .next-half-btn:active {
            transform: scale(0.98);
            background: #E6345E;
        }

        /* ===== EVENTS TIMELINE ===== */
        .events-area {
            flex: 1;
            overflow-y: auto;
            padding: 12px 20px;
            -webkit-overflow-scrolling: touch;
            min-height: 0;
        }

        .events-area::-webkit-scrollbar {
            width: 3px;
        }
        .events-area::-webkit-scrollbar-thumb {
            background: #00FF88;
            border-radius: 3px;
        }

        .event-item {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255,255,255,0.08);
            position: relative;
        }
        .event-item:last-child {
            border-bottom: none;
        }

        .event-minute {
            font-size: 13px;
            font-weight: 700;
            color: #00FF88;
            min-width: 30px;
            text-align: right;
            padding-top: 1px;
        }

        .event-text {
            font-size: 13px;
            color: rgba(255,255,255,0.8);
            line-height: 1.4;
            flex: 1;
        }

        .event-item.event-goal .event-minute { color: #00FF88; }
        .event-item.event-yellow .event-minute { color: #FFB800; }
        .event-item.event-red .event-minute { color: #FF3D71; }
        .event-item.event-half .event-minute,
        .event-item.event-end .event-minute { color: rgba(255,255,255,0.4); }
        .event-item.event-half .event-text,
        .event-item.event-end .event-text { color: rgba(255,255,255,0.5); font-style: italic; }

        .event-delete {
            background: none;
            border: none;
            color: rgba(255,255,255,0.2);
            font-size: 14px;
            cursor: pointer;
            padding: 2px 4px;
        }
        .event-delete:active {
            color: #FF3D71;
        }

        .no-events {
            text-align: center;
            color: rgba(255,255,255,0.25);
            padding: 20px;
            font-size: 13px;
            font-style: italic;
        }

        /* ===== BOTTOM TOOLBAR ===== */
        .bottom-toolbar {
            display: flex;
            align-items: center;
            justify-content: space-around;
            padding: 10px 16px;
            padding-bottom: calc(10px + env(safe-area-inset-bottom, 0px));
            background: #0A0E27;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            flex-shrink: 0;
            border-top: 2px solid #00FF88;
        }

        .toolbar-btn {
            width: 52px;
            height: 52px;
            border: none;
            border-radius: 12px;
            font-size: 22px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #1E2749;
            color: white;
            transition: transform 0.1s;
            position: relative;
        }
        .toolbar-btn:active {
            transform: scale(0.9);
        }

        .toolbar-btn.yellow-card {
            background: rgba(255, 184, 0, 0.2);
            color: #FFB800;
            border: 2px solid rgba(255, 184, 0, 0.3);
        }
        .toolbar-btn.red-card {
            background: rgba(255, 61, 113, 0.2);
            color: #FF3D71;
            border: 2px solid rgba(255, 61, 113, 0.3);
        }
        .toolbar-btn.download-btn {
            background: rgba(0, 255, 136, 0.15);
            color: #00FF88;
            border: 2px solid rgba(0, 255, 136, 0.3);
        }

        .toolbar-btn .btn-label {
            position: absolute;
            bottom: -1px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 8px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.3px;
            white-space: nowrap;
            opacity: 0.7;
        }

        /* ===== MODAL ===== */
        .modal {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.85);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .modal-content {
            background: white;
            padding: 24px;
            border-radius: 16px;
            max-width: 380px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            border-top: 4px solid #00FF88;
        }

        .modal-content h3 {
            color: #0A0E27;
            margin-bottom: 16px;
            font-size: 20px;
            font-weight: 700;
            text-align: center;
        }

        .team-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 16px;
        }

        .team-select-btn {
            flex: 1;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            background: white;
            font-size: 14px;
            font-weight: 700;
            cursor: pointer;
            color: #666;
            font-family: inherit;
        }
        .team-select-btn.selected {
            background: #00FF88;
            border-color: #0A0E27;
            color: #0A0E27;
        }

        .number-grid-label {
            font-weight: 700;
            color: #0A0E27;
            margin-bottom: 8px;
            font-size: 13px;
        }

        .number-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 6px;
            margin-bottom: 10px;
        }

        .number-btn {
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            background: white;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            color: #666;
            font-family: inherit;
        }
        .number-btn.selected {
            background: #00FF88;
            border-color: #0A0E27;
            color: #0A0E27;
        }

        .custom-number-container {
            margin-bottom: 10px;
        }

        .custom-number-container label {
            font-size: 12px;
            font-weight: 600;
            color: #666;
            margin-bottom: 4px;
            display: block;
        }

        .custom-number-container input {
            width: 100%;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 700;
            text-align: center;
            font-family: inherit;
        }
        .custom-number-container input:focus {
            outline: none;
            border-color: #00FF88;
        }

        .player-name-input {
            width: 100%;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 12px;
            font-family: inherit;
        }
        .player-name-input:focus {
            outline: none;
            border-color: #00FF88;
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
        }
        .modal-buttons button {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 10px;
            font-size: 15px;
            font-weight: 700;
            cursor: pointer;
            font-family: inherit;
        }
        .btn-cancel {
            background: #666;
            color: white;
        }
        .btn-confirm {
            background: #00FF88;
            color: #0A0E27;
        }

        /* Flash animation for timer */
        @keyframes flash {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        /* Wake lock indicator */
        #wakeLockStatus {
            font-size: 10px;
            color: rgba(0, 255, 136, 0.5);
            margin-top: 2px;
        }

        /* Hide team dropdown (used for older code compat) */
        #teamDropdownContainer { display: none !important; }

        /* Print styles */
        @media print {
            body { background: white; }
        }
    </style>
</head>
<body>
    <div class="app-shell">
        <!-- HEADER -->
        <div class="header-bar">
            <img src="data:image/png;base64,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" class="club-badge" alt="FC Purmerend" onerror="this.style.display='none'">
            <span class="logo-text">SCORR</span>
            <button class="share-btn" onclick="shareApp()">üì§</button>
        </div>

        <!-- SCORE PANEL -->
        <div class="score-panel">
            <div class="teams-row">
                <div class="team-col">
                    <input type="text" class="team-name-input" id="homeTeamName" value="FC Purmerend" placeholder="Thuisploeg">
                    <div class="score-number" id="homeScore">0</div>
                    <div class="score-btns">
                        <button class="score-btn minus" id="homeMinusBtn">‚àí</button>
                        <button class="score-btn plus" id="homePlusBtn">+</button>
                    </div>
                </div>
                <div class="score-separator">-</div>
                <div class="team-col">
                    <input type="text" class="team-name-input" id="awayTeamName" value="Tegenstander" placeholder="Uitploeg">
                    <div class="score-number" id="awayScore">0</div>
                    <div class="score-btns">
                        <button class="score-btn minus" id="awayMinusBtn">‚àí</button>
                        <button class="score-btn plus" id="awayPlusBtn">+</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- TIMER STRIP -->
        <div class="timer-strip">
            <div class="timer-meta" id="halfIndicator">1e Helft</div>
            <div class="timer-row">
                <div class="timer-display" id="timerDisplay">00:00</div>
                <div class="timer-controls-inline">
                    <button class="timer-btn-small play" id="startBtn">‚ñ∂</button>
                    <button class="timer-btn-small pause" id="pauseBtn">‚è∏</button>
                </div>
            </div>
            <div class="timer-sub-row">
                <div class="setting-inline">
                    <span>Helft:</span>
                    <button class="adj-btn" id="durationMinusBtn">‚àí</button>
                    <span class="val" id="durationDisplay">45</span>
                    <button class="adj-btn" id="durationPlusBtn">+</button>
                    <span>min</span>
                </div>
                <div class="setting-inline">
                    <span>Bless:</span>
                    <button class="adj-btn" id="injuryMinusBtn">‚àí</button>
                    <span class="val" id="injuryDisplay">0</span>
                    <button class="adj-btn" id="injuryPlusBtn">+</button>
                    <span>min</span>
                </div>
            </div>
            <div id="wakeLockStatus"></div>
        </div>

        <!-- NEXT HALF / END MATCH -->
        <div class="next-half-bar">
            <button class="next-half-btn" id="nextHalfBtn">‚è≠Ô∏è Volgende helft</button>
        </div>

        <!-- EVENTS TIMELINE -->
        <div class="events-area">
            <div id="eventsList">
                <div class="no-events">Nog geen gebeurtenissen</div>
            </div>
        </div>

        <!-- BOTTOM TOOLBAR -->
        <div class="bottom-toolbar">
            <button class="toolbar-btn yellow-card" id="yellowBtn" title="Gele kaart">
                üü®
            </button>
            <button class="toolbar-btn red-card" id="redBtn" title="Rode kaart">
                üü•
            </button>
            <button class="toolbar-btn" id="stopBtn" title="Timer reset">
                ‚èπ
                <span class="btn-label">STOP</span>
            </button>
            <button class="toolbar-btn download-btn" id="downloadBtn" title="Verslag">
                üìÑ
                <span class="btn-label">PDF</span>
            </button>
        </div>
    </div>

    <!-- EVENT MODAL -->
    <div id="eventModal" class="modal">
        <div class="modal-content">
            <h3 id="modalTitle">Gebeurtenis toevoegen</h3>

            <div id="teamButtonsContainer" class="team-buttons" style="display: none;">
                <button class="team-select-btn" id="homeTeamBtn" data-team="home">Thuisploeg</button>
                <button class="team-select-btn" id="awayTeamBtn" data-team="away">Uitploeg</button>
            </div>

            <div id="teamDropdownContainer">
                <select id="modalTeam">
                    <option value="home">Thuisploeg</option>
                    <option value="away">Uitploeg</option>
                </select>
            </div>

            <div class="number-grid-label">Rugnummer:</div>
            <div class="number-grid" id="numberGrid"></div>

            <div class="custom-number-container">
                <label for="customNumber">Anders:</label>
                <input type="number" id="customNumber" placeholder="Vul rugnr in" min="0" max="99">
            </div>

            <input type="text" id="modalPlayerName" class="player-name-input" placeholder="Naam speler (optioneel)">

            <div class="modal-buttons">
                <button class="btn-cancel" id="cancelBtn">Annuleren</button>
                <button class="btn-confirm" id="confirmBtn">Bevestigen</button>
            </div>
        </div>
    </div>

    <script>
        // ===== STATE =====
        console.log('üöÄ SCORR Scheidsrechter App loaded');

        window.addEventListener('error', function(e) {
            if (e.message === 'Script error.' || e.message === 'Script error') return;
            console.error('‚ùå Error:', e.message, 'line', e.lineno);
        });

        let timerStartTime = null;
        let timerPausedAt = null;
        let accumulatedSeconds = 0;
        let timerInterval = null;
        let isRunning = false;
        let currentHalf = 1;
        let homeScoreValue = 0;
        let awayScoreValue = 0;
        let events = [];
        let currentEventType = '';
        let currentGoalTeam = '';
        let selectedTeam = '';
        let selectedNumber = '';
        let injuryTime = 0;
        let halfDuration = 45;
        let wakeLock = null;

        // ===== LOCAL STORAGE =====
        function loadTimerState() {
            const saved = localStorage.getItem('scorr_timer_state');
            if (saved) {
                try {
                    const state = JSON.parse(saved);
                    timerStartTime = state.startTime;
                    timerPausedAt = state.pausedAt;
                    accumulatedSeconds = state.accumulated || 0;
                    isRunning = state.isRunning || false;
                    currentHalf = state.half || 1;
                    if (isRunning && timerStartTime) {
                        const now = Date.now();
                        const elapsed = Math.floor((now - timerStartTime) / 1000);
                        accumulatedSeconds = state.accumulated + elapsed;
                        timerStartTime = now;
                        startTimer();
                    }
                } catch (e) { console.error('Load error:', e); }
            }
        }

        function saveTimerState() {
            localStorage.setItem('scorr_timer_state', JSON.stringify({
                startTime: timerStartTime,
                pausedAt: timerPausedAt,
                accumulated: accumulatedSeconds,
                isRunning: isRunning,
                half: currentHalf
            }));
        }

        function getCurrentSeconds() {
            if (!timerStartTime) return accumulatedSeconds;
            if (isRunning) {
                return accumulatedSeconds + Math.floor((Date.now() - timerStartTime) / 1000);
            }
            return accumulatedSeconds;
        }

        // ===== WAKE LOCK =====
        async function requestWakeLock() {
            try {
                if ('wakeLock' in navigator) {
                    wakeLock = await navigator.wakeLock.request('screen');
                    const el = document.getElementById('wakeLockStatus');
                    if (el) el.textContent = 'üîí Scherm blijft aan';
                    wakeLock.addEventListener('release', () => {
                        if (isRunning) setTimeout(() => { if (isRunning) requestWakeLock(); }, 1000);
                    });
                }
            } catch (err) {
                const el = document.getElementById('wakeLockStatus');
                if (el) el.textContent = '‚è±Ô∏è Timer loopt op achtergrond';
            }
        }

        async function releaseWakeLock() {
            if (wakeLock) { try { await wakeLock.release(); wakeLock = null; } catch(e){} }
            const el = document.getElementById('wakeLockStatus');
            if (el) el.textContent = '';
        }

        document.addEventListener('visibilitychange', async () => {
            if (wakeLock && document.visibilityState === 'visible' && isRunning) await requestWakeLock();
        });

        // ===== ELEMENTS =====
        const timerDisplay = document.getElementById('timerDisplay');
        const halfIndicator = document.getElementById('halfIndicator');
        const injuryDisplay = document.getElementById('injuryDisplay');
        const homeScore = document.getElementById('homeScore');
        const awayScore = document.getElementById('awayScore');
        const eventsList = document.getElementById('eventsList');
        const eventModal = document.getElementById('eventModal');
        const modalTitle = document.getElementById('modalTitle');
        const durationDisplay = document.getElementById('durationDisplay');

        // ===== DISPLAY =====
        function updateDurationDisplay() { durationDisplay.textContent = halfDuration; }
        function updateInjuryTimeDisplay() { injuryDisplay.textContent = injuryTime; }

        function changeDuration(delta) {
            halfDuration = Math.max(10, Math.min(45, halfDuration + delta));
            updateDurationDisplay();
        }

        function changeInjuryTime(delta) {
            injuryTime = Math.max(0, Math.min(15, injuryTime + delta));
            updateInjuryTimeDisplay();
        }

        function formatTime(totalSeconds) {
            const mins = Math.floor(totalSeconds / 60);
            const secs = totalSeconds % 60;
            return `${String(mins).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;
        }

        function getCurrentMinute() {
            return Math.floor(getCurrentSeconds() / 60) + 1;
        }

        function updateDisplay() {
            timerDisplay.textContent = formatTime(getCurrentSeconds());
            halfIndicator.textContent = currentHalf === 1 ? '1e Helft' : '2e Helft';
        }

        // ===== TIMER =====
        let audioCtx = null;
        let audioInitialized = false;

        function initAudioContext() {
            if (!audioInitialized) {
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                audioInitialized = true;
            }
            if (audioCtx && audioCtx.state === 'suspended') audioCtx.resume();
        }

        async function startTimer() {
            if (!isRunning) {
                isRunning = true;
                timerStartTime = Date.now();
                initAudioContext();
                await requestWakeLock();
                timerInterval = setInterval(() => {
                    updateDisplay();
                    checkTimeExpired();
                    saveTimerState();
                }, 100);
                saveTimerState();
            }
        }

        let timeExpiredTriggered = false;

        function checkTimeExpired() {
            const currentSeconds = getCurrentSeconds();
            let targetSeconds;
            if (currentHalf === 1) {
                targetSeconds = (halfDuration + injuryTime) * 60;
            } else {
                targetSeconds = (2 * halfDuration + injuryTime) * 60;
            }
            if (currentSeconds >= targetSeconds && !timeExpiredTriggered) {
                timeExpiredTriggered = true;
                playWhistleAndVibrate();
            }
            if (currentSeconds < targetSeconds) timeExpiredTriggered = false;
        }

        function playWhistleAndVibrate() {
            initAudioContext();
            if ('vibrate' in navigator) {
                if (currentHalf === 1) navigator.vibrate([300, 200, 300, 200, 300]);
                else navigator.vibrate([900, 250, 300, 200, 300]);
            }
            playWhistleSound();
            showTimeExpiredNotification();
        }

        function playWhistleSound() {
            if (!audioCtx) return;
            function playBlast(startTime, duration) {
                const osc1 = audioCtx.createOscillator();
                const osc2 = audioCtx.createOscillator();
                const gainNode = audioCtx.createGain();
                const distortion = audioCtx.createWaveShaper();
                const curve = new Float32Array(256);
                for (let i = 0; i < 256; i++) {
                    const x = (i * 2) / 256 - 1;
                    curve[i] = (Math.PI + 200) * x / (Math.PI + 200 * Math.abs(x));
                }
                distortion.curve = curve;
                osc1.connect(distortion); osc2.connect(distortion);
                distortion.connect(gainNode); gainNode.connect(audioCtx.destination);
                osc1.type = 'sine'; osc2.type = 'sine';
                osc1.frequency.setValueAtTime(3100, startTime);
                osc1.frequency.linearRampToValueAtTime(3200, startTime + duration * 0.1);
                osc1.frequency.setValueAtTime(3200, startTime + duration * 0.9);
                osc1.frequency.linearRampToValueAtTime(3050, startTime + duration);
                osc2.frequency.setValueAtTime(3140, startTime);
                osc2.frequency.linearRampToValueAtTime(3250, startTime + duration * 0.1);
                osc2.frequency.setValueAtTime(3250, startTime + duration * 0.9);
                osc2.frequency.linearRampToValueAtTime(3090, startTime + duration);
                gainNode.gain.setValueAtTime(0, startTime);
                gainNode.gain.linearRampToValueAtTime(0.4, startTime + 0.02);
                gainNode.gain.setValueAtTime(0.35, startTime + duration - 0.08);
                gainNode.gain.linearRampToValueAtTime(0, startTime + duration);
                osc1.start(startTime); osc1.stop(startTime + duration);
                osc2.start(startTime); osc2.stop(startTime + duration);
            }
            const now = audioCtx.currentTime;
            if (currentHalf === 1) {
                playBlast(now, 0.35); playBlast(now + 0.55, 0.35); playBlast(now + 1.10, 0.35);
            } else {
                playBlast(now, 0.9); playBlast(now + 1.2, 0.35); playBlast(now + 1.75, 0.35);
            }
        }

        function showTimeExpiredNotification() {
            timerDisplay.style.animation = 'flash 0.6s ease-in-out 4';
            const isHalftime = currentHalf === 1;
            const title = isHalftime ? 'üì£ RUSTSIGNAAL!' : 'üèÜ EINDSIGNAAL!';
            const message = isHalftime
                ? `1e helft afgelopen.\n(${halfDuration}+${injuryTime} min)\n\nDruk op Volgende Helft.`
                : `Wedstrijd afgelopen!\n(${halfDuration}+${injuryTime} min)`;
            setTimeout(() => {
                timerDisplay.style.animation = '';
                alert(`${title}\n\n${message}`);
                pauseTimer();
            }, 2000);
        }

        async function pauseTimer() {
            if (isRunning) {
                isRunning = false;
                accumulatedSeconds += Math.floor((Date.now() - timerStartTime) / 1000);
                timerPausedAt = Date.now();
                timerStartTime = null;
                if (timerInterval) { clearInterval(timerInterval); timerInterval = null; }
                await releaseWakeLock();
                saveTimerState();
                updateDisplay();
            }
        }

        async function stopTimer() {
            if (!confirm('‚ö†Ô∏è Weet je zeker dat je de timer wilt resetten?\n\nDe timer wordt op 00:00 gezet.')) return;
            await pauseTimer();
            accumulatedSeconds = 0;
            timerStartTime = null;
            timerPausedAt = null;
            saveTimerState();
            updateDisplay();
        }

        function nextHalf() {
            pauseTimer();
            if (currentHalf === 1) {
                currentHalf = 2;
                accumulatedSeconds = halfDuration * 60;
                timerStartTime = null;
                timerPausedAt = null;
                injuryTime = 0;
                timeExpiredTriggered = false;
                updateInjuryTimeDisplay();
                addEvent('half', null, null, 'Rust');
                saveTimerState();
            } else {
                if (confirm('Wil je de wedstrijd afsluiten?')) {
                    addEvent('end', null, null, 'Einde Wedstrijd');
                    currentHalf = 1;
                    accumulatedSeconds = 0;
                    timerStartTime = null;
                    timerPausedAt = null;
                    timeExpiredTriggered = false;
                    saveTimerState();
                }
            }
            updateDisplay();
        }

        // ===== SCORE =====
    function changeScore(team, delta) {
    if (team === 'home') {
        homeScoreValue = Math.max(0, homeScoreValue + delta);
        homeScore.textContent = homeScoreValue;
    } else if (team === 'away') {
        awayScoreValue = Math.max(0, awayScoreValue + delta);
        awayScore.textContent = awayScoreValue;
    }
    // Firebase sync
    const wedstrijdId = localStorage.getItem('wedstrijdId');
    if (wedstrijdId && window._firebaseDb) {
        import("https://www.gstatic.com/firebasejs/12.9.0/firebase-database.js").then(({ ref, update }) => {
            update(ref(window._firebaseDb, `wedstrijden/${wedstrijdId}`), {
                thuisscore: homeScoreValue,
                uitscore: awayScoreValue
            });
        });
    }
}

        // ===== EVENTS =====
        function showEventModal(eventType, team = null) {
            currentEventType = eventType;
            if (team) selectedTeam = team;
            else if (eventType === 'goal' && currentGoalTeam) selectedTeam = currentGoalTeam;

            const titles = { 'goal': '‚öΩ Doelpunt', 'yellow': 'üü® Gele Kaart', 'red': 'üü• Rode Kaart' };
            modalTitle.textContent = titles[eventType];

            const teamBtnsC = document.getElementById('teamButtonsContainer');
            if (eventType === 'goal' && (team || currentGoalTeam)) {
                teamBtnsC.style.display = 'none';
            } else {
                selectedTeam = '';
                teamBtnsC.style.display = 'flex';
                document.getElementById('homeTeamBtn').classList.remove('selected');
                document.getElementById('awayTeamBtn').classList.remove('selected');
            }

            // Update team button labels
            document.getElementById('homeTeamBtn').textContent = document.getElementById('homeTeamName').value || 'Thuisploeg';
            document.getElementById('awayTeamBtn').textContent = document.getElementById('awayTeamName').value || 'Uitploeg';

            const numberGrid = document.getElementById('numberGrid');
            numberGrid.innerHTML = '';
            for (let i = 0; i <= 16; i++) {
                const btn = document.createElement('button');
                btn.className = 'number-btn';
                btn.textContent = i;
                btn.type = 'button';
                btn.addEventListener('click', () => selectNumber(i));
                numberGrid.appendChild(btn);
            }
            selectedNumber = '';
            document.getElementById('customNumber').value = '';
            document.getElementById('modalPlayerName').value = '';
            eventModal.style.display = 'flex';
        }

        function selectTeam(team) {
            selectedTeam = team;
            document.getElementById('homeTeamBtn').classList.toggle('selected', team === 'home');
            document.getElementById('awayTeamBtn').classList.toggle('selected', team === 'away');
        }

        function selectNumber(number) {
            selectedNumber = number;
            document.getElementById('customNumber').value = '';
            document.querySelectorAll('.number-btn').forEach(btn => {
                btn.classList.toggle('selected', parseInt(btn.textContent) === number);
            });
        }

        function closeModal() {
            eventModal.style.display = 'none';
            selectedTeam = '';
            selectedNumber = '';
        }

        function confirmEvent() {
            const team = currentEventType === 'goal' ? currentGoalTeam : selectedTeam;
            const customNum = document.getElementById('customNumber').value;
            const playerNumber = customNum !== '' ? customNum : selectedNumber;
            const playerName = document.getElementById('modalPlayerName').value;

            if (!team) { alert('Selecteer eerst een team'); return; }
            if (playerNumber === '' || playerNumber === undefined) { alert('Selecteer een rugnummer'); return; }

            if (currentEventType === 'goal') changeScore(team, 1);
            addEvent(currentEventType, team, playerNumber, playerName);
            closeModal();
        }

        function removeLastGoal(team) {
            const idx = events.findIndex(e => e.type === 'goal' && e.team === team);
            if (idx === -1) { alert('Geen doelpunt gevonden'); return; }
            deleteEvent(idx);
        }

        function deleteEvent(index) {
            const event = events[index];
            if (!confirm('Weet je zeker dat je dit wilt verwijderen?')) return;
            if (event.type === 'goal' && event.team) changeScore(event.team, -1);
            events.splice(index, 1);
            renderEvents();
        }
        window.deleteEvent = deleteEvent;

        function addEvent(type, team, playerNumber, playerName) {
            const minute = getCurrentMinute();
            const teamName = team === 'home'
                ? document.getElementById('homeTeamName').value
                : team === 'away'
                    ? document.getElementById('awayTeamName').value
                    : '';

            let description = '';
            if (type === 'goal') {
                description = `‚öΩ DOELPUNT! ${teamName} - #${playerNumber}`;
                if (playerName) description += ` (${playerName})`;
            } else if (type === 'yellow') {
                description = `üü® Gele kaart ${teamName} - #${playerNumber}`;
                if (playerName) description += ` (${playerName})`;
            } else if (type === 'red') {
                description = `üü• Rode kaart ${teamName} - #${playerNumber}`;
                if (playerName) description += ` (${playerName})`;
            } else if (type === 'half') {
                description = playerName;
            } else if (type === 'end') {
                description = `${playerName} - Stand: ${homeScoreValue} - ${awayScoreValue}`;
            }

            events.unshift({ minute, type, description, team });
            renderEvents();
        }

        function renderEvents() {
            if (events.length === 0) {
                eventsList.innerHTML = '<div class="no-events">Nog geen gebeurtenissen</div>';
                return;
            }
            let html = '';
            events.forEach((event, index) => {
                const canDelete = ['goal', 'yellow', 'red'].includes(event.type);
                html += `
                    <div class="event-item event-${event.type}">
                        <div class="event-minute">${event.minute}'</div>
                        <div class="event-text">${event.description}</div>
                        ${canDelete ? `<button class="event-delete" onclick="window.deleteEvent(${index})">‚úï</button>` : ''}
                    </div>`;
            });
            eventsList.innerHTML = html;
        }

        // ===== MATCH REPORT (PDF) =====
        function downloadMatchReport() {
            const homeTeam = document.getElementById('homeTeamName').value || 'Thuisploeg';
            const awayTeam = document.getElementById('awayTeamName').value || 'Uitploeg';
            const currentDate = new Date().toLocaleDateString('nl-NL', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
            const currentTime = new Date().toLocaleTimeString('nl-NL', { hour: '2-digit', minute: '2-digit' });

            let eventsHTML = '';
            if (events.length === 0) {
                eventsHTML = '<p style="text-align:center;color:#999;padding:20px;">Geen gebeurtenissen</p>';
            } else {
                events.slice().forEach(event => {
                    let icon = '', rowClass = '';
                    if (event.type === 'goal')   { icon = '‚öΩ'; rowClass = 'row-goal'; }
                    if (event.type === 'yellow') { icon = 'üü®'; rowClass = 'row-yellow'; }
                    if (event.type === 'red')    { icon = 'üü•'; rowClass = 'row-red'; }
                    if (event.type === 'half')   { icon = '‚è∏'; rowClass = 'row-half'; }
                    if (event.type === 'end')    { icon = 'üèÅ'; rowClass = 'row-end'; }
                    eventsHTML += `<tr class="${rowClass}"><td style="width:50px;font-weight:700;">${event.minute}'</td><td style="width:35px;">${icon}</td><td>${event.description}</td></tr>`;
                });
            }

            const reportHTML = `<!DOCTYPE html><html lang="nl"><head><meta charset="UTF-8"><title>Verslag ${homeTeam} vs ${awayTeam}</title>
<style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:sans-serif;background:#f5f5f5}.page{max-width:800px;margin:0 auto;background:white;padding:0}
.header{background:#0A0E27;color:white;padding:30px;text-align:center}.header h1{font-size:28px;margin-bottom:8px}.score-big{font-size:52px;font-weight:900;color:#00FF88;margin:10px 0}
.meta{font-size:12px;color:#888;margin-top:10px}.body{padding:25px}table{width:100%;border-collapse:collapse}th{background:#0A0E27;color:white;padding:10px;text-align:left;font-size:12px;text-transform:uppercase}
td{padding:10px;border-bottom:1px solid #eee;font-size:14px}.row-goal{border-left:4px solid #00FF88}.row-yellow{border-left:4px solid #FFB800}.row-red{border-left:4px solid #FF3D71}
.row-half{background:#f5f5f5;border-left:4px solid #999}.row-end{background:#0A0E27;border-left:4px solid #00FF88}.row-end td{color:#00FF88;font-weight:700}
.footer{text-align:center;padding:20px;color:#999;font-size:11px;border-top:2px solid #00FF88}
</style></head><body><div class="page">
<div class="header"><h1>${homeTeam} vs ${awayTeam}</h1><div class="score-big">${homeScoreValue} - ${awayScoreValue}</div><div class="meta">${currentDate} | ${currentTime} | Speelduur: ${halfDuration} min per helft</div></div>
<div class="body"><h3 style="margin-bottom:12px;font-size:16px;">Wedstrijdverloop</h3>
<table><thead><tr><th>Min</th><th></th><th>Gebeurtenis</th></tr></thead><tbody>${eventsHTML}</tbody></table></div>
<div class="footer">SCORR ‚Äî FC Purmerend Scheidsrechter App | ${currentDate} ${currentTime}</div></div>
<div style="text-align:center;padding:20px;background:#eee"><button onclick="window.print()" style="background:#0A0E27;color:#00FF88;border:none;padding:14px 40px;font-size:16px;font-weight:600;border-radius:8px;cursor:pointer">üñ®Ô∏è OPSLAAN ALS PDF</button></div>
</body></html>`;

            const printWindow = window.open('', '_blank');
            if (printWindow) {
                printWindow.document.write(reportHTML);
                printWindow.document.close();
                if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
                    setTimeout(() => alert('üì± Verslag geopend!\n\n1. Klik Deel-icoon (‚ñ°‚Üë)\n2. Kies "Print"\n3. Bewaar als PDF'), 500);
                }
            } else {
                alert('‚ùå Pop-up geblokkeerd! Sta pop-ups toe.');
            }
        }

        // ===== SHARE =====
        async function shareApp() {
            const inIframe = window.self !== window.top;
            if (inIframe) {
                prompt('üì§ Kopieer link:', window.location.href);
                return;
            }
            const shareData = { title: 'SCORR Scheidsrechter App', text: 'Live scores bijhouden!', url: window.location.href };
            try {
                if (navigator.share && navigator.canShare && navigator.canShare(shareData)) {
                    await navigator.share(shareData);
                } else if (navigator.clipboard) {
                    await navigator.clipboard.writeText(window.location.href);
                    alert('üìã Link gekopieerd!');
                } else {
                    prompt('Kopieer link:', window.location.href);
                }
            } catch (err) { prompt('Kopieer link:', window.location.href); }
        }

        // ===== EVENT LISTENERS =====
        document.getElementById('startBtn').addEventListener('click', startTimer);
        document.getElementById('pauseBtn').addEventListener('click', pauseTimer);
        document.getElementById('stopBtn').addEventListener('click', stopTimer);
        document.getElementById('durationPlusBtn').addEventListener('click', () => changeDuration(5));
        document.getElementById('durationMinusBtn').addEventListener('click', () => changeDuration(-5));
        document.getElementById('injuryPlusBtn').addEventListener('click', () => changeInjuryTime(1));
        document.getElementById('injuryMinusBtn').addEventListener('click', () => changeInjuryTime(-1));

        document.getElementById('homePlusBtn').addEventListener('click', () => {
            currentGoalTeam = 'home';
            showEventModal('goal');
        });
        document.getElementById('homeMinusBtn').addEventListener('click', () => removeLastGoal('home'));
        document.getElementById('awayPlusBtn').addEventListener('click', () => {
            currentGoalTeam = 'away';
            showEventModal('goal');
        });
        document.getElementById('awayMinusBtn').addEventListener('click', () => removeLastGoal('away'));

        document.getElementById('yellowBtn').addEventListener('click', () => showEventModal('yellow'));
        document.getElementById('redBtn').addEventListener('click', () => showEventModal('red'));
        document.getElementById('nextHalfBtn').addEventListener('click', nextHalf);
        document.getElementById('cancelBtn').addEventListener('click', closeModal);
        document.getElementById('confirmBtn').addEventListener('click', confirmEvent);
        document.getElementById('homeTeamBtn').addEventListener('click', () => selectTeam('home'));
        document.getElementById('awayTeamBtn').addEventListener('click', () => selectTeam('away'));
        document.getElementById('downloadBtn').addEventListener('click', downloadMatchReport);

        document.body.addEventListener('input', function(e) {
            if (e.target.id === 'customNumber' && e.target.value) {
                document.querySelectorAll('.number-btn').forEach(btn => btn.classList.remove('selected'));
                selectedNumber = '';
            }
        });

        // ===== INIT =====
        loadTimerState();
        updateDisplay();
        updateInjuryTimeDisplay();
        updateDurationDisplay();

        console.log('‚úÖ SCORR v2 ‚Äî compact layout geladen');
    </script>
<!-- 
  ================================================
  SCORR - Wedstrijd Popup v3 voor FC Purmerend
  INSTRUCTIE: Vervang de vorige popup code en 
  plak deze net voor </body> in je HTML
  ================================================
-->

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
  import { getDatabase, ref, set, get } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-database.js";
  import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyAputZcr7XyKRQL4-566a8gpS5R6SEL79U",
    authDomain: "scorr-c604a.firebaseapp.com",
    databaseURL: "https://scorr-c604a-default-rtdb.europe-west1.firebasedatabase.app",
    projectId: "scorr-c604a",
    storageBucket: "scorr-c604a.firebasestorage.app",
    messagingSenderId: "413840042688",
    appId: "1:413840042688:web:3183c36fd20f27ac925b25"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);
  window._firebaseDb = db;
  const auth = getAuth(app);

  const teamMapping = {
    "team1@fcpurmerend.nl": "FC Purmerend O14-1",
    "team2@fcpurmerend.nl": "FC Purmerend O14-2",
    "team3@fcpurmerend.nl": "FC Purmerend O16-1",
    "team4@fcpurmerend.nl": "FC Purmerend O18-1"
  };

  let huidigWedstrijdId = null;

  window.addEventListener('DOMContentLoaded', () => {
    onAuthStateChanged(auth, (user) => {
      if (user) {
        const teamNaam = teamMapping[user.email] || "Onbekend Team";
        checkBestaandeWedstrijd(teamNaam, user);
      } else {
        window.location.href = '/frontend/auth/login.html';
      }
    });
  });

  async function checkBestaandeWedstrijd(teamNaam, user) {
    const snapshot = await get(ref(db, 'wedstrijden'));

    let gevondenWedstrijd = null;
    let gevondenId = null;

    if (snapshot.exists()) {
      snapshot.forEach((child) => {
        const data = child.val();
        if (data.thuisteam === teamNaam && data.status === 'gepland') {
          gevondenWedstrijd = data;
          gevondenId = child.key;
        }
      });
    }

    if (gevondenWedstrijd) {
      huidigWedstrijdId = gevondenId;
      localStorage.setItem('wedstrijdId', gevondenId);
      localStorage.setItem('thuisteam', gevondenWedstrijd.thuisteam);
      localStorage.setItem('uitteam', gevondenWedstrijd.uitteam);
      toonBanner(gevondenWedstrijd, teamNaam, user);
    } else {
      toonPopup(teamNaam, user, null);
    }
  }

  function toonBanner(wedstrijd, teamNaam, user) {
    document.getElementById('scorr-banner').style.display = 'flex';
    document.getElementById('banner-team').textContent = wedstrijd.thuisteam;
    document.getElementById('banner-tegenstander').textContent = wedstrijd.uitteam;
    document.getElementById('banner-datum').textContent = wedstrijd.datum;
    document.getElementById('banner-tijdstip').textContent = wedstrijd.tijdstip;
    document.getElementById('banner-klasse').textContent = wedstrijd.klasse;

    document.getElementById('banner-wijzig-btn').addEventListener('click', () => {
      document.getElementById('scorr-banner').style.display = 'none';
      toonPopup(teamNaam, user, wedstrijd);
    });
  }

  function toonPopup(teamNaam, user, bestaandeData) {
    const vandaag = new Date().toISOString().split('T')[0];
    const huidigTijdstip = new Date().toTimeString().slice(0,5);

    document.getElementById('scorr-popup-overlay').style.display = 'flex';
    document.getElementById('popup-team-naam').textContent = teamNaam;
    document.getElementById('popup-tegenstander').value = bestaandeData ? bestaandeData.uitteam : '';
    document.getElementById('popup-klasse').value = bestaandeData ? bestaandeData.klasse : '';
    document.getElementById('popup-datum').value = bestaandeData ? bestaandeData.datum : vandaag;
    document.getElementById('popup-tijdstip').value = bestaandeData ? bestaandeData.tijdstip : huidigTijdstip;
    document.getElementById('popup-subtitel').textContent = bestaandeData ? 'Wedstrijd wijzigen' : 'Wedstrijd instellen';

    document.getElementById('popup-start-btn').onclick = () => {
      const tegenstander = document.getElementById('popup-tegenstander').value.trim();
      const klasse = document.getElementById('popup-klasse').value.trim();
      const datum = document.getElementById('popup-datum').value;
      const tijdstip = document.getElementById('popup-tijdstip').value;

      if (!tegenstander || !klasse) {
        document.getElementById('popup-error').style.display = 'block';
        return;
      }

      const wedstrijdId = huidigWedstrijdId || `${user.uid}_${datum}_${tijdstip.replace(':','')}`;

      set(ref(db, `wedstrijden/${wedstrijdId}`), {
        thuisteam: teamNaam,
        uitteam: tegenstander,
        klasse: klasse,
        datum: datum,
        tijdstip: tijdstip,
        thuisscore: 0,
        uitscore: 0,
        status: 'gepland',
        club: 'fc-purmerend'
      });

      localStorage.setItem('wedstrijdId', wedstrijdId);
      localStorage.setItem('thuisteam', teamNaam);
      localStorage.setItem('uitteam', tegenstander);

      document.getElementById('scorr-popup-overlay').style.display = 'none';
    };
  }
</script>

<!-- Banner: wedstrijd al gepland -->
<div id="scorr-banner" style="display:none; position:fixed; top:0; left:0; right:0; z-index:9998; background:#1E2749; border-bottom:2px solid rgba(0,255,136,0.4); padding:14px 20px; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap; font-family:'Lexend',sans-serif;">
  <div style="display:flex; align-items:center; gap:12px; flex-wrap:wrap;">
    <span style="font-size:11px; letter-spacing:2px; text-transform:uppercase; color:#00FF88; font-weight:600;">‚úì Wedstrijd geladen</span>
    <span id="banner-team" style="font-size:14px; font-weight:700; color:#F0F4FF;"></span>
    <span style="color:rgba(240,244,255,0.4)">vs</span>
    <span id="banner-tegenstander" style="font-size:14px; font-weight:700; color:#F0F4FF;"></span>
    <span style="font-size:12px; color:rgba(240,244,255,0.5);">¬∑</span>
    <span id="banner-klasse" style="font-size:12px; color:rgba(240,244,255,0.5);"></span>
    <span style="font-size:12px; color:rgba(240,244,255,0.5);">¬∑</span>
    <span id="banner-datum" style="font-size:12px; color:rgba(240,244,255,0.5);"></span>
    <span id="banner-tijdstip" style="font-size:12px; color:rgba(240,244,255,0.5);"></span>
  </div>
  <button id="banner-wijzig-btn" style="background:transparent; border:1px solid rgba(255,214,0,0.4); color:#FFD600; border-radius:6px; padding:6px 16px; font-size:12px; font-weight:600; font-family:'Lexend',sans-serif; cursor:pointer; white-space:nowrap;">
    ‚úé Wijzigen
  </button>
</div>

<!-- Popup HTML -->
<div id="scorr-popup-overlay" style="display:none; position:fixed; inset:0; background:rgba(10,14,39,0.95); z-index:9999; align-items:center; justify-content:center; padding:20px;">
  <div style="background:#1E2749; border:1px solid rgba(0,255,136,0.3); border-radius:16px; padding:32px; width:100%; max-width:420px; font-family:'Lexend',sans-serif;">
    
    <div style="text-align:center; margin-bottom:28px;">
      <div style="font-size:28px; font-weight:900; color:#00FF88; letter-spacing:-1px;">SCORR</div>
      <div id="popup-subtitel" style="font-size:12px; color:rgba(240,244,255,0.5); letter-spacing:3px; text-transform:uppercase; margin-top:4px;">Wedstrijd instellen</div>
    </div>

    <div style="margin-bottom:16px;">
      <label style="font-size:11px; letter-spacing:2px; text-transform:uppercase; color:#00FF88; font-weight:600; display:block; margin-bottom:6px;">Jouw team</label>
      <div id="popup-team-naam" style="background:rgba(0,255,136,0.08); border:1px solid rgba(0,255,136,0.2); border-radius:8px; padding:12px 16px; font-size:15px; font-weight:600; color:#F0F4FF;"></div>
    </div>

    <div style="margin-bottom:16px;">
      <label style="font-size:11px; letter-spacing:2px; text-transform:uppercase; color:rgba(240,244,255,0.6); font-weight:600; display:block; margin-bottom:6px;">Tegenstander *</label>
      <input id="popup-tegenstander" type="text" placeholder="bijv. Ajax O14-3" style="width:100%; background:rgba(255,255,255,0.05); border:1px solid rgba(255,255,255,0.15); border-radius:8px; padding:12px 16px; font-size:15px; color:#F0F4FF; font-family:'Lexend',sans-serif; outline:none;" />
    </div>

    <div style="margin-bottom:16px;">
      <label style="font-size:11px; letter-spacing:2px; text-transform:uppercase; color:rgba(240,244,255,0.6); font-weight:600; display:block; margin-bottom:6px;">Klasse *</label>
      <input id="popup-klasse" type="text" placeholder="bijv. 4e klasse district" style="width:100%; background:rgba(255,255,255,0.05); border:1px solid rgba(255,255,255,0.15); border-radius:8px; padding:12px 16px; font-size:15px; color:#F0F4FF; font-family:'Lexend',sans-serif; outline:none;" />
    </div>

    <div style="display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-bottom:24px;">
      <div>
        <label style="font-size:11px; letter-spacing:2px; text-transform:uppercase; color:rgba(240,244,255,0.6); font-weight:600; display:block; margin-bottom:6px;">Datum</label>
        <input id="popup-datum" type="date" style="width:100%; background:rgba(255,255,255,0.05); border:1px solid rgba(255,255,255,0.15); border-radius:8px; padding:12px 16px; font-size:14px; color:#F0F4FF; font-family:'Lexend',sans-serif; outline:none;" />
      </div>
      <div>
        <label style="font-size:11px; letter-spacing:2px; text-transform:uppercase; color:rgba(240,244,255,0.6); font-weight:600; display:block; margin-bottom:6px;">Tijdstip</label>
        <input id="popup-tijdstip" type="time" style="width:100%; background:rgba(255,255,255,0.05); border:1px solid rgba(255,255,255,0.15); border-radius:8px; padding:12px 16px; font-size:14px; color:#F0F4FF; font-family:'Lexend',sans-serif; outline:none;" />
      </div>
    </div>

    <div id="popup-error" style="display:none; background:rgba(255,59,92,0.1); border:1px solid rgba(255,59,92,0.3); border-radius:8px; padding:10px 16px; font-size:13px; color:#FF3B5C; margin-bottom:16px;">
      Vul tegenstander en klasse in om te starten.
    </div>

    <button id="popup-start-btn" style="width:100%; background:#00FF88; color:#0A0E27; border:none; border-radius:8px; padding:16px; font-size:16px; font-weight:700; font-family:'Lexend',sans-serif; cursor:pointer; letter-spacing:1px;">
      ‚ñ∂ START WEDSTRIJD
    </button>

  </div>
</div>
</body>
</html>